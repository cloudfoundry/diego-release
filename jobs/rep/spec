---
name: rep

templates:
  rep_ctl.erb: bin/rep_ctl
  drain.erb: bin/drain

packages:
  - pid_utils
  - rep

properties:
  diego.rep.etcd.machines:
    description: "IPs pointing to the ETCD cluster"
  diego.rep.stack:
    description: "The stack for which to handle requests"
    default: "lucid64"
  diego.rep.listen_addr:
    description: "address to serve auction and LRP stop requests on"
    default: "0.0.0.0:1800"
  diego.rep.debug_addr:
    description: "address at which to serve debug info"
    default: "0.0.0.0:17008"
  diego.rep.polling_interval_in_seconds:
    description: "The interval to look for completed tasks and LRPs in seconds"
    default: 30
  diego.rep.evacuation_polling_interval_in_seconds:
    description: "The interval to look for completed tasks and LRPs during evacuation in seconds"
    default: 10
  diego.rep.evacuation_timeout_in_seconds:
    description: "The time to wait for evacuation to complete in seconds"
    default: 600
  diego.rep.zone:
    description: "The zone associated with the rep"
  diego.rep.preloaded_rootfses:
    description: "Array of name:absolute_path pairs representing root filesystems preloaded onto the underlying garden"
    default:
      - cflinuxfs2:/var/vcap/packages/rootfs_cflinuxfs2
      - lucid64:/var/vcap/packages/rootfs_lucid64
  diego.rep.rootfs_providers:
    description: "Array of schemes for which the underlying garden can support arbitrary root filesystems"
    default:
      - docker
  diego.rep.log_level:
    description: "Log level"
    default: "info"
  diego.rep.receptor_task_handler_url:
    description: "URL for task completion call back"
    default: http://receptor.service.consul:1169

  diego.ssl.skip_cert_verify:
    description: "when connecting over https, ignore bad ssl certificates"
    default: false

  diego.executor.memory_capacity_mb:
    description: "the memory capacity the executor should manage.  this should not be greater than the actual memory on the VM"
    default: "auto"
  diego.executor.disk_capacity_mb:
    description: "the container disk capacity the executor should manage.  this should not be greater than the actual disk quota on the VM"
    default: "auto"
  diego.executor.container_max_cpu_shares:
    description: "the maximum number of cpu shares for a container."
    default: 1024
  diego.executor.container_inode_limit:
    description: "the inode limit enforced on each garden container."
    default: 200000
  diego.executor.cache_path:
    description: "path to the executor's cache"
    default: "/var/vcap/data/executor_cache"
  diego.executor.max_cache_size_in_bytes:
    description: "maximum size of the cache in bytes - this should leave a healthy overhead for temporary items, etc."
    default: 10000000000
  diego.executor.garden.address:
    description: "Garden server listening address."
    default: /var/vcap/data/garden-linux/garden-linux.sock
  diego.executor.garden.network:
    description: "Network type for the garden server connection (tcp or unix)."
    default: unix
  diego.executor.allow_privileged:
    description: "Allow creation of privileged containers."
    default: false
  diego.executor.export_network_env_vars:
    description: "Export network environment variables into container (e.g. CF_INSTANCE_IP, CF_INSTANCE_PORT)."
    default: true
  diego.executor.healthy_monitoring_interval_in_seconds:
    description: "Interval to check healthy containers in seconds."
    default: 30
  diego.executor.unhealthy_monitoring_interval_in_seconds:
    description: "Interval to check unhealthy containers in seconds."
    default: 0.5
  diego.executor.create_work_pool_size:
    description: "Maximum number of concurrent create container operations."
    default: 32
  diego.executor.delete_work_pool_size:
    description: "Maximum number of concurrent delete container operations."
    default: 32
  diego.executor.read_work_pool_size:
    description: "Maximum number of concurrent get container info operations."
    default: 64
  diego.executor.metrics_work_pool_size:
    description: "Maximum number of concurrent get container metrics operations."
    default: 8
  diego.executor.healthcheck_work_pool_size:
    description: "Maximum number of concurrent health check operations."
    default: 64
